<div class="register-container">
    <div class="box-form">
      <h1 class="title">Movie<span class="red-text">Data</span></h1>
      <form
        (ngSubmit)="register()"
        [formGroup]="registerForm"
        class="register-form"
      >
        <h2 class="register-title">Cadastro</h2>
        <div class="mb-3">
          <label for="email" class="form-label">Email
            <b *ngIf="registerForm.get('email')?.hasError('required')" class="text-danger">*</b>
            <b *ngIf="registerForm.get('email')?.hasError('pattern')" class="text-danger"> * Formato de e-mail inválido</b>
          </label>
          <input
            formControlName="email"
            class="input-register"
            id="email"
            [(ngModel)]="user.email"
            name="email"
            placeholder="meuemail@example.com"
            required
            pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
          />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label"
            >Password<b
              *ngIf="registerForm.get('password')?.hasError('required')"
              class="text-danger"
            >
              *</b
            ></label
          >
          <input
            formControlName="password"
            class="input-register"
            id="password"
            [(ngModel)]="user.password"
            name="password"
            type="password"
            placeholder="mypassword"
            minlength="8"
            required
          />
          <div
            *ngIf="
              registerForm.get('password')?.invalid &&
              (registerForm.get('password')?.dirty ||
                registerForm.get('password')?.touched)
            "
            class="text-danger"
          >
            <p>* A senha deve ter pelo menos 8 caracteres.</p>
          </div>
        </div>
        <div class="mb-3">
          <label for="username" class="form-label">Username<b *ngIf="registerForm.get('username')?.hasError('required')"class="text-danger"> *</b></label>
          <input
            formControlName="username"
            class="input-register"
            id="username"
            [(ngModel)]="user.username"
            name="username"
            placeholder="myusername"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary w-100 button-submit">
          Cadastrar
        </button>
        <span class="span-redirect"
          >Já possui uma conta?<a class="redirect-login" href="/login"
            >Faça login.</a
          ></span
        >
      </form>
    </div>
  
    <div class="overlay" [hidden]="!loading"></div>
  
    <div class="spinner-container" [hidden]="!loading">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
    <div class="custom-alert" *ngIf="successMessage">
      Cadastro realizado com sucesso! Faça o login.
    </div>
  </div>
  
